This directory contains the version of Henry Spencer's Unicode-based Regular Expression library that MOKit builds and uses.  It has been modified from the version found in the Tcl 8.3.2 distribution which is where I got it.  The unmodified source (from Tcl 8.3.2) is shipped with MOKit in the folder named HSRegexp.

A directory comparison of these two folders using FileMerge will show the modifications.  For the most part the modifications are in the area of function prefixes and typedefs to make the code fit into MOKit and Cocoa better as well as additional include statements to pick up needed funtion prototypes.  regc_local.c required more modification due to its use of a Tcl object for Unicode to UTF8 conversion.  I have converted this to use CFString instead.  The stuff in MORegexpHelpers.[hm] provide a couple simple utilities in a form consumable by the regexp stuff.  Again, this replaces things that were relying on general Tcl code in the original.

For the true regexp diehards, I should mention that while almost all the test cases from the old regexp library that MOKit used in earlier releases still pass, there are 8 (or 125) that fail.  In all these cases the test suite expected the test regexp NOT to compile, but it did.  I do not know why these now compile, so I have left them in the test suite, but they seem pretty fringe and at least they are not failures to compile successfully or match correctly.  2 of the original test cases have been removed from the test suite because I could tell why they now compile with the advanced regex support in this new implementation: one used the now allowed '*?' syntax and one had more than 9 subexpressions (which is now supported).  For the remaining 8 test cases that fail for unknown reasons, the RegexTest tool and data has been updated so that these cases are marked and their failure does not cause overall failure of the test suite.
